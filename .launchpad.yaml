pipeline:
- [run-tests, lint]

jobs:
    run-tests:
        series: focal
        architectures: amd64
        packages: [dctrl-tools, python3, python3, python3-mock, python3-simplestreams, procmail, squashfs-tools, file, pep8, pyflakes3]
        run: ./run-tests >output
        output:
            paths: [output]

    lint:
        series: focal
        architectures: amd64
        packages: [tox, git]
        snaps:
            - name: go
              classic: true
        run: tox -e lint
