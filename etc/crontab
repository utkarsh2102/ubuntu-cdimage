PATH=/srv/cdimage.ubuntu.com/bin:/usr/sbin:/usr/bin:/sbin:/bin

# On the Ubuntu production instance, this file lives in
# /srv/cdimage.ubuntu.com/etc/crontab; please update that file if you expect
# your changes to survive.

# CD image cron jobs, run out of cdimage's crontab.

# core16 daily builds
30 8 * * *	DIST=xenial for-project ubuntu-core cron.daily-live --live


# core18 daily builds
33 8 * * *	DIST=bionic for-project ubuntu-core cron.daily-live --live


# core20 daily builds
36 6 * * *	EXTRA_PPAS=snappy-dev/image DIST=focal CHANNEL=dangerous-edge for-project ubuntu-core cron.daily-live --live
36 7 * * *	EXTRA_PPAS=snappy-dev/image DIST=focal CHANNEL=dangerous-beta for-project ubuntu-core cron.daily-live --live
#36 8 * * *	EXTRA_PPAS=snappy-dev/image DIST=focal for-project ubuntu-core cron.daily-live --live
#36 9 * * *	EXTRA_PPAS=snappy-dev/image DIST=focal CHANNEL=beta for-project ubuntu-core cron.daily-live --live


# core22 daily builds
36 10 * * *	EXTRA_PPAS=snappy-dev/image DIST=jammy CHANNEL=dangerous-edge for-project ubuntu-core cron.daily-live --live
36 11 * * *	EXTRA_PPAS=snappy-dev/image DIST=jammy CHANNEL=dangerous-beta for-project ubuntu-core cron.daily-live --live
#36 12 * * *	EXTRA_PPAS=snappy-dev/image DIST=jammy CHANNEL=stable for-project ubuntu-core cron.daily-live --live
#36 13 * * *	EXTRA_PPAS=snappy-dev/image DIST=jammy CHANNEL=dangerous-stable for-project ubuntu-core cron.daily-live --live


# Tegra core22 daily builds; using proposed for edge builds; not using
# EXTRA_PPAS=snappy-dev/image as that should only be needed to build the core
# snap itself at this point, but using ubuntu-tegra/tegra-jetson-sru while
# we SRU support for arm64+tegra-jetson to jammy
37 01 * * *	for channel in edge stable dangerous; do env EXTRA_PPAS=ubuntu-tegra/tegra-jetson-sru PROPOSED=1 CDIMAGE_SUBTREE=nvidia-tegra ARCHES=arm64+tegra-jetson DIST=jammy CHANNEL=$channel for-project ubuntu-core cron.daily-live --live; done
#39 13 * * *	PROPOSED=0 CDIMAGE_SUBTREE=nvidia-tegra ARCHES=arm64+tegra-jetson DIST=jammy CHANNEL=beta for-project ubuntu-core cron.daily-live --live
#40 13 * * *	PROPOSED=0 CDIMAGE_SUBTREE=nvidia-tegra ARCHES=arm64+tegra-jetson DIST=jammy CHANNEL=candidate for-project ubuntu-core cron.daily-live --live
#41 13 * * *	PROPOSED=0 CDIMAGE_SUBTREE=nvidia-tegra ARCHES=arm64+tegra-jetson DIST=jammy CHANNEL=stable for-project ubuntu-core cron.daily-live --live


# core24 daily builds
36 14 * * * EXTRA_PPAS=snappy-dev/image DIST=noble CHANNEL=dangerous-edge for-project ubuntu-core cron.daily-live --live
36 15 * * * EXTRA_PPAS=snappy-dev/image DIST=noble CHANNEL=dangerous-beta for-project ubuntu-core cron.daily-live --live
36 16 1,15 * * DIST=noble CHANNEL=stable for-project ubuntu-core cron.daily-live --live
36 17 * * * EXTRA_PPAS=snappy-dev/image DIST=noble CHANNEL=beta for-project ubuntu-core cron.daily-live --live


# bionic ubuntu-base tarball still building
# The daily ubuntu-base bionic images are used by core18, so we can't build it
# with proposed enabled.
52 4 * * *	PROPOSED=0 DIST=bionic for-project ubuntu-base cron.daily-live --live
# The daily ubuntu-base focal images are used by core20, so we can't build it
# with proposed enabled.
32 4 * * *	PROPOSED=0 DIST=focal for-project ubuntu-base cron.daily-live --live


# jammy daily builds
# Tegra images under the nvidia-tegra subtree; this uses a PPA just to get a
# backport of livecd-rootfs with u-i 3.x support
30 2 * * *	CDIMAGE_SUBTREE=nvidia-tegra EXTRA_PPAS="ubuntu-tegra/updates" ARCHES="arm64+tegra-jetson" DIST=jammy for-project ubuntu-server cron.daily-preinstalled --live
# The daily ubuntu-base jammy images are used by core22, so we can't build it
# with proposed enabled.
52 4 * * *	PROPOSED=0 DIST=jammy for-project ubuntu-base cron.daily-live --live


# noble daily builds
41 10 * * *	DIST=noble for-project ubuntu-mini-iso cron.daily-live --live
41 6 * * *	DIST=noble PROPOSED=0 for-project ubuntu cron.daily-live --live; DIST=noble SUBPROJECT=desktop-preinstalled for-project ubuntu cron.daily-preinstalled --live
21 8 * * *	DIST=noble PROPOSED=1 for-project kubuntu cron.daily-live --live
2 2 * * *	DIST=noble for-project xubuntu cron.daily-live --live; DIST=noble SUBPROJECT=minimal for-project xubuntu cron.daily-minimal --live
41 3 * * *	DIST=noble for-project edubuntu cron.daily-live --live; DIST=noble for-project edubuntu cron.daily-preinstalled --live
10 4 * * *	DIST=noble for-project ubuntu-server cron.daily-preinstalled --live; DIST=noble SUBPROJECT=live for-project ubuntu-server cron.daily-live --live
05 7 * * *	for-project ubuntu-core-installer cron.daily-live --live; for-project ubuntu-core-desktop cron.daily-live --live
38 17 * * *	DIST=noble for-project ubuntustudio cron.daily-live --live
41 14 * * *	DIST=noble PROPOSED=1 for-project lubuntu cron.daily-live --live
24 21 * * *	DIST=noble for-project ubuntukylin cron.daily-live --live
10 14 * * *	DIST=noble for-project ubuntu-budgie cron.daily-live --live
41 3 * * *	DIST=noble for-project ubuntu-mate cron.daily-live --live
10 12 * * *	DIST=noble PROPOSED=1 for-project ubuntu-unity cron.daily-live --live
24 12 * * *	DIST=noble for-project ubuntucinnamon cron.daily-live --live
21 02 * * *	DIST=noble for-project ubuntu-wsl cron.daily-live --live
# The daily ubuntu-base images are used by core-next, so we can't build it
# with proposed enabled.
12 5 * * *	DIST=noble PROPOSED=0 for-project ubuntu-base cron.daily-live --live


# regular questing daily builds
41 9 * * *	for-project ubuntu-mini-iso cron.daily-live --live
24 5 * * *	for-project ubuntu cron.daily-live --live; SUBPROJECT=desktop-preinstalled for-project ubuntu cron.daily-preinstalled --live
41 7 * * *	for-project kubuntu cron.daily-live --live
40 1 * * *	for-project xubuntu cron.daily-live --live; SUBPROJECT=minimal for-project xubuntu cron.daily-minimal --live
41 1 * * *	for-project edubuntu cron.daily-live --live; for-project edubuntu cron.daily-preinstalled --live
10 3 * * *	for-project ubuntu-server cron.daily-preinstalled --live; SUBPROJECT=live for-project ubuntu-server cron.daily-live --live
27 18 * * *	for-project ubuntustudio cron.daily-live --live
39 16 * * *	for-project lubuntu cron.daily-live --live
24 22 * * *	for-project ubuntukylin cron.daily-live --live
10 15 * * *	for-project ubuntu-budgie cron.daily-live --live
36 2 * * *	for-project ubuntu-mate cron.daily-live --live
10 13 * * *	for-project ubuntu-unity cron.daily-live --live
24 13 * * *	for-project ubuntucinnamon cron.daily-live --live
21 02 * * *	for-project ubuntu-wsl cron.daily-live --live
# The daily ubuntu-base images are used by core-next, so we can't build it
# with proposed enabled.
42 4 * * *	PROPOSED=0 for-project ubuntu-base cron.daily-live --live


*/15 * * * *	mirror-image-build-logs
5 11 * * *	daily-checks


# Self-rebuilds
*/5 * * * *	rebuild-requests -b -q jammy iso
*/5 * * * *	rebuild-requests -b -q noble iso
*/5 * * * *	rebuild-requests -b -q questing iso
*/5 * * * *	rebuild-requests -b -q 20 iso
*/5 * * * *	rebuild-requests -b -q 22 iso
